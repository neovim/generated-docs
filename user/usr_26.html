<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Nvim documentation: usr_26</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="/css/normalize.min.css" rel="stylesheet">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <header class="container">
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a href="/" class="navbar-brand">
            <svg xmlns="http://www.w3.org/2000/svg" style="height: 2.5em" viewBox="0 0 742 214">
              <defs>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="a">
                  <stop stop-color="#16B0ED" stop-opacity=".8" offset="0%" />
                  <stop stop-color="#0F59B2" stop-opacity=".837" offset="100%" />
                </linearGradient>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="b">
                  <stop stop-color="#7DB643" offset="0%" />
                  <stop stop-color="#367533" offset="100%" />
                </linearGradient>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="c">
                  <stop stop-color="#88C649" stop-opacity=".8" offset="0%" />
                  <stop stop-color="#439240" stop-opacity=".84" offset="100%" />
                </linearGradient>
              </defs>
              <g fill="none" fill-rule="evenodd">
                <path
                  d="M.027 45.459L45.224-.173v212.171L.027 166.894V45.459z"
                  fill="url(#a)"
                  transform="translate(1 1)"
                />
                <path
                  d="M129.337 45.89L175.152-.149l-.928 212.146-45.197-45.104.31-121.005z"
                  fill="url(#b)"
                  transform="matrix(-1 0 0 1 305 1)"
                />
                <path
                  d="M45.194-.137L162.7 179.173l-32.882 32.881L12.25 33.141 45.194-.137z"
                  fill="url(#c)"
                  transform="translate(1 1)"
                />
                <path
                  d="M46.234 84.032l-.063 7.063-36.28-53.563 3.36-3.422 32.983 49.922z"
                  fill-opacity=".13"
                  fill="#000"
                />
                <g fill="#444">
                  <path
                    d="M227 154V64.44h4.655c1.55 0 2.445.75 2.685 2.25l.806 13.502c4.058-5.16 8.786-9.316 14.188-12.466 5.4-3.15 11.413-4.726 18.037-4.726 4.893 0 9.205.781 12.935 2.34 3.729 1.561 6.817 3.811 9.264 6.751 2.448 2.942 4.297 6.48 5.55 10.621 1.253 4.14 1.88 8.821 1.88 14.042V154h-8.504V96.754c0-8.402-1.91-14.987-5.729-19.757-3.82-4.771-9.667-7.156-17.544-7.156-5.851 0-11.28 1.516-16.292 4.545-5.013 3.032-9.489 7.187-13.427 12.467V154H227zM350.624 63c5.066 0 9.755.868 14.069 2.605 4.312 1.738 8.052 4.268 11.219 7.592s5.638 7.412 7.419 12.264C385.11 90.313 386 95.883 386 102.17c0 1.318-.195 2.216-.588 2.696-.393.48-1.01.719-1.851.719h-64.966v1.70c0 6.708.784 12.609 2.353 17.7 1.567 5.09 3.8 9.357 6.695 12.802 2.895 3.445 6.393 6.034 10.495 7.771 4.1 1.738 8.686 2.606 13.752 2.606 4.524 0 8.446-.494 11.762-1.483 3.317-.988 6.108-2.097 8.37-3.324 2.261-1.227 4.056-2.336 5.383-3.324 1.326-.988 2.292-1.482 2.895-1.482.784 0 1.388.3 1.81.898l2.352 2.875c-1.448 1.797-3.362 3.475-5.745 5.031-2.383 1.558-5.038 2.891-7.962 3.998-2.926 1.109-6.062 1.991-9.41 2.65a52.21 52.21 0 01-10.088.989c-6.152 0-11.762-1.064-16.828-3.19-5.067-2.125-9.415-5.225-13.043-9.298-3.63-4.074-6.435-9.06-8.415-14.96C310.99 121.655 310 114.9 310 107.294c0-6.408.92-12.323 2.76-17.744 1.84-5.421 4.493-10.093 7.961-14.016 3.467-3.922 7.72-6.991 12.758-9.209C338.513 64.11 344.229 63 350.624 63zm.573 6c-4.696 0-8.904.702-12.623 2.105-3.721 1.404-6.936 3.421-9.65 6.053-2.713 2.631-4.908 5.79-6.586 9.474S319.55 94.439 319 99h60c0-4.679-.672-8.874-2.013-12.588-1.343-3.712-3.232-6.856-5.67-9.43-2.44-2.571-5.367-4.545-8.782-5.92-3.413-1.374-7.192-2.062-11.338-2.062zM435.546 63c6.526 0 12.368 1.093 17.524 3.28 5.154 2.186 9.5 5.286 13.04 9.298 3.538 4.013 6.238 8.85 8.099 14.51 1.861 5.66 2.791 11.994 2.791 19.002 0 7.008-.932 13.327-2.791 18.957-1.861 5.631-4.561 10.452-8.099 14.465-3.54 4.012-7.886 7.097-13.04 9.254-5.156 2.156-10.998 3.234-17.524 3.234-6.529 0-12.369-1.078-17.525-3.234-5.155-2.157-9.517-5.242-13.085-9.254-3.57-4.013-6.285-8.836-8.145-14.465-1.861-5.63-2.791-11.95-2.791-18.957 0-7.008.93-13.342 2.791-19.002 1.861-5.66 4.576-10.496 8.145-14.51 3.568-4.012 7.93-7.112 13.085-9.299C423.177 64.094 429.017 63 435.546 63zm-.501 86c5.341 0 10.006-.918 13.997-2.757 3.99-1.838 7.32-4.474 9.992-7.909 2.67-3.435 4.664-7.576 5.986-12.428 1.317-4.85 1.98-10.288 1.98-16.316 0-5.965-.66-11.389-1.98-16.27-1.322-4.88-3.316-9.053-5.986-12.519-2.67-3.463-6-6.13-9.992-7.999-3.991-1.867-8.657-2.802-13.997-2.802s-10.008.935-13.997 2.802c-3.991 1.87-7.322 4.536-9.992 8-2.671 3.465-4.68 7.637-6.03 12.518-1.35 4.881-2.026 10.305-2.026 16.27 0 6.026.675 11.465 2.025 16.316 1.35 4.852 3.36 8.993 6.031 12.428 2.67 3.435 6 6.07 9.992 7.91 3.99 1.838 8.656 2.756 13.997 2.756z"
                    fill="currentColor"
                  />
                  <path
                    d="M530.57 152h-20.05L474 60h18.35c1.61 0 2.967.39 4.072 1.166 1.103.778 1.865 1.763 2.283 2.959l17.722 49.138a92.762 92.762 0 012.551 8.429c.686 2.751 1.298 5.5 1.835 8.25.537-2.75 1.148-5.499 1.835-8.25a77.713 77.713 0 012.64-8.429l18.171-49.138c.417-1.196 1.164-2.181 2.238-2.96 1.074-.776 2.356-1.165 3.849-1.165H567l-36.43 92zM572 61h23v92h-23zM610 153V60.443h13.624c2.887 0 4.78 1.354 5.682 4.06l1.443 6.856a52.7 52.7 0 015.097-4.962 32.732 32.732 0 015.683-3.879 30.731 30.731 0 016.496-2.57c2.314-.632 4.855-.948 7.624-.948 5.832 0 10.63 1.579 14.39 4.736 3.758 3.157 6.57 7.352 8.434 12.585 1.444-3.068 3.248-5.698 5.413-7.894 2.165-2.194 4.541-3.984 7.127-5.367a32.848 32.848 0 018.254-3.068 39.597 39.597 0 018.796-.992c5.111 0 9.653.783 13.622 2.345 3.97 1.565 7.307 3.849 10.014 6.857 2.706 3.007 4.766 6.675 6.18 11.005C739.29 83.537 740 88.5 740 94.092V153h-22.284V94.092c0-5.894-1.294-10.329-3.878-13.306-2.587-2.977-6.376-4.465-11.368-4.465-2.286 0-4.404.391-6.358 1.172a15.189 15.189 0 00-5.144 3.383c-1.473 1.474-2.631 3.324-3.474 5.548-.842 2.225-1.263 4.781-1.263 7.668V153h-22.37V94.092c0-6.194-1.249-10.704-3.744-13.532-2.497-2.825-6.18-4.24-11.051-4.24-3.19 0-6.18.798-8.976 2.391-2.799 1.593-5.399 3.775-7.804 6.54V153H610zM572 30h23v19h-23z"
                    fill="currentColor"
                    fill-opacity=".8"
                  />
                </g>
              </g>
            </svg>
          </a>
        </div>
      </nav>
    </header>

    <div class="container">
      <h1>Nvim documentation: usr_26</h1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="usr_26.txt"></A><B>usr_26.txt</B>*	Nvim

		     VIM USER MANUAL - by Bram Moolenaar

				  Repeating


An editing task is hardly ever unstructured.  A change often needs to be made
several times.  In this chapter a number of useful ways to repeat a change
will be explained.

|<A HREF="#26.1">26.1</A>|	Repeating with <A HREF="visual.html#Visual">Visual</A> mode
|<A HREF="#26.2">26.2</A>|	Add and subtract
|<A HREF="#26.3">26.3</A>|	Making a change in many files
|<A HREF="#26.4">26.4</A>|	Using Vim from a shell <A HREF="usr_41.html#script">script</A>

     Next chapter: |<A HREF="usr_27.html">usr_27.txt</A>|  Search commands and patterns
 Previous chapter: |<A HREF="usr_25.html">usr_25.txt</A>|  Editing formatted text
Table of contents: |<A HREF="usr_toc.html">usr_toc.txt</A>|

==============================================================================

*<A NAME="26.1"></A><B>26.1</B>*	Repeating with <A HREF="visual.html#Visual">Visual</A> mode

<A HREF="visual.html#Visual">Visual</A> mode is very handy for making a change in any sequence of lines.  You
can see the highlighted text, thus you can check if the correct lines are
changed.  But making the selection takes some typing.  The &quot;<A HREF="visual.html#gv">gv</A>&quot; command
selects the same area again.  This allows you to <A HREF="diff.html#do">do</A> another operation on the
same text.
   Suppose you have some lines where you want to change &quot;2001&quot; to &quot;2002&quot; and
&quot;2000&quot; to &quot;2001&quot;:

<B><FONT color="#54A23D">	The financial results for 2001 are better </FONT></B>
<B><FONT color="#54A23D">	than for 2000.  The income increased by 50%, </FONT></B>
<B><FONT color="#54A23D">	even though 2001 had more rain than 2000. </FONT></B>
<B><FONT color="#54A23D">			2000		2001 </FONT></B>
<B><FONT color="#54A23D">	income		45,403		66,234 </FONT></B>

First change &quot;2001&quot; to &quot;2002&quot;.  <A HREF="visual.html#Select">Select</A> the lines in <A HREF="visual.html#Visual">Visual</A> mode, and use:

<B>	:s/2001/2002/g</B>

Now use &quot;<A HREF="visual.html#gv">gv</A>&quot; to reselect the same text.  It doesn't matter where the cursor
is.  Then use &quot;:s/2000/2001/g&quot; to make the second change.
   Obviously, you can repeat these changes several times.

==============================================================================

*<A NAME="26.2"></A><B>26.2</B>*	Add and subtract

When <A HREF="repeat.html#repeating">repeating</A> the change of one number into another, you often have a fixed
offset.  In the example above, one was added to each year.  Instead of typing
a substitute command for each year that appears, the <A HREF="change.html#CTRL-A">CTRL-A</A> command can be
used.
   Using the same text <A HREF="motion.html#as">as</A> above, search for a year:

<B>	/19[0-9][0-9]\|20[0-9][0-9]</B>

Now press <A HREF="change.html#CTRL-A">CTRL-A</A>.  The year will be increased by one:

<B><FONT color="#54A23D">	The financial results for 2002 are better </FONT></B>
<B><FONT color="#54A23D">	than for 2000.  The income increased by 50%, </FONT></B>
<B><FONT color="#54A23D">	even though 2001 had more rain than 2000. </FONT></B>
<B><FONT color="#54A23D">			2000		2001 </FONT></B>
<B><FONT color="#54A23D">	income		45,403		66,234 </FONT></B>

Use &quot;<A HREF="pattern.html#n">n</A>&quot; to find the next year, and press &quot;<A HREF="repeat.html#.">.</A>&quot; to repeat the <A HREF="change.html#CTRL-A">CTRL-A</A> (&quot;.&quot; is a
bit quicker to type).  Repeat &quot;<A HREF="pattern.html#n">n</A>&quot; and &quot;<A HREF="repeat.html#.">.</A>&quot; for all years that appear.

Adding more than one can be done by prepending the number to <A HREF="change.html#CTRL-A">CTRL-A</A>.  Suppose
you have this <A HREF="eval.html#list">list</A>:

<B><FONT color="#54A23D">	1.  item four </FONT></B>
<B><FONT color="#54A23D">	2.  item five </FONT></B>
<B><FONT color="#54A23D">	3.  item six </FONT></B>

Move the cursor to &quot;1.&quot; and type:

<B>	3 CTRL-A</B>

The &quot;1.&quot; will change to &quot;4.&quot;.  Again, you can use &quot;<A HREF="repeat.html#.">.</A>&quot; to repeat this on the
other numbers.

The <A HREF="change.html#CTRL-X">CTRL-X</A> command does subtraction in a similar way.

The behavior of <A HREF="change.html#CTRL-A">CTRL-A</A> and <A HREF="change.html#CTRL-X">CTRL-X</A> depends on the value of |<A HREF="options.html#'nrformats'">'nrformats'</A>|. For
example, if you use:

<B>        :set nrformats+=octal</B>

pressing <A HREF="change.html#CTRL-A">CTRL-A</A> over &quot;007&quot; will increment to &quot;010&quot;, because &quot;007&quot; will be
identified <A HREF="motion.html#as">as</A> an <A HREF="eval.html#octal">octal</A> number.

==============================================================================

*<A NAME="26.3"></A><B>26.3</B>*	Making a change in many files

Suppose you have a variable called &quot;x_cnt&quot; and you want to change <A HREF="motion.html#it">it</A> to
&quot;x_counter&quot;.  This variable is used in several of your C files.  You need to
change <A HREF="motion.html#it">it</A> in all files.  This is how you <A HREF="diff.html#do">do</A> <A HREF="motion.html#it">it</A>.
   Put all the relevant files in the argument <A HREF="eval.html#list">list</A>:

<B>	:args *.c</B>
 
This finds all C files and edits the first one.  Now you can perform a
substitution command on all these files:

<B>	:argdo %s/\&lt;x_cnt\&gt;/x_counter/ge | update</B>

The &quot;<A HREF="editing.html#:argdo">:argdo</A>&quot; command takes an argument that is another command.  That command
will be executed on all files in the argument <A HREF="eval.html#list">list</A>.
   The &quot;&#37;s&quot; substitute command that follows works on all lines.  It finds the
<A HREF="motion.html#word">word</A> &quot;x_cnt&quot; with &quot;\&lt;x_cnt\&gt;&quot;.  The &quot;\&lt;&quot; and &quot;\&gt;&quot; are used to match the whole
<A HREF="motion.html#word">word</A> only, and not &quot;px_cnt&quot; or &quot;x_cnt2&quot;.
   The flags for the substitute command include &quot;<A HREF="vimindex.html#g">g</A>&quot; to replace all occurrences
of &quot;x_cnt&quot; in the same line.  The &quot;<A HREF="motion.html#e">e</A>&quot; flag is used to avoid an error message
when &quot;x_cnt&quot; does not appear in the file.  Otherwise &quot;<A HREF="editing.html#:argdo">:argdo</A>&quot; would abort on
the first file where &quot;x_cnt&quot; was not found.
   The &quot;|&quot; separates two commands.  The following &quot;update&quot; command writes the
file only if <A HREF="motion.html#it">it</A> was changed.  If no &quot;x_cnt&quot; was changed to &quot;x_counter&quot; nothing
happens.

There is also the &quot;<A HREF="windows.html#:windo">:windo</A>&quot; command, which executes its argument in all
<A HREF="windows.html#windows">windows</A>.  And &quot;<A HREF="windows.html#:bufdo">:bufdo</A>&quot; executes its argument on all <A HREF="windows.html#buffers">buffers</A>.  Be careful with
this, because you might have more files in the buffer <A HREF="eval.html#list">list</A> than you think.
Check this with the &quot;<A HREF="windows.html#:buffers">:buffers</A>&quot; command (or &quot;:ls&quot;).

==============================================================================

*<A NAME="26.4"></A><B>26.4</B>*	Using Vim from a shell <A HREF="usr_41.html#script">script</A>

Suppose you have a lot of files in which you need to change the <A HREF="eval.html#string">string</A>
&quot;-person-&quot; to &quot;Jones&quot; and then print <A HREF="motion.html#it">it</A>.  How <A HREF="diff.html#do">do</A> you <A HREF="diff.html#do">do</A> that?  One way is to
<A HREF="diff.html#do">do</A> a lot of typing.  The other is to write a shell <A HREF="usr_41.html#script">script</A> to <A HREF="diff.html#do">do</A> the work.
   The Vim editor does a superb <A HREF="job_control.html#job">job</A> <A HREF="motion.html#as">as</A> a screen-oriented editor when using
<A HREF="intro.html#Normal">Normal</A> mode commands.  For batch processing, however, <A HREF="intro.html#Normal">Normal</A> mode commands <A HREF="diff.html#do">do</A>
not result in clear, commented command files; so here you will use <A HREF="intro.html#Ex">Ex</A> mode
instead.  This mode gives you a nice command-line interface that makes <A HREF="motion.html#it">it</A> easy
to put into a batch file.  (&quot;Ex command&quot; is just another name for a
command-line (:) command.)
   The <A HREF="intro.html#Ex">Ex</A> mode commands you need are <A HREF="motion.html#as">as</A> follows:

<B>	%s/-person-/Jones/g</B>
<B>	write tempfile</B>
<B>	quit</B>

You put these commands in the file &quot;change.vim&quot;.  Now to run the editor in
batch mode, use this shell <A HREF="usr_41.html#script">script</A>:

<B>	for file in *.txt; do</B>
<B>	  vim -e -s $file &lt; change.vim</B>
<B>	  lpr -r tempfile</B>
<B>	done</B>

The for-done loop is a shell construct to repeat the two lines in between,
while the $file variable is set to a different file name each time.
   The second line runs the Vim editor in <A HREF="intro.html#Ex">Ex</A> mode (-e argument) on the file
$file and reads commands from the file &quot;change.vim&quot;.  The <A HREF="starting.html#-s">-s</A> argument tells
Vim to operate in silent mode.  In other words, <A HREF="diff.html#do">do</A> not keep outputting the
:prompt, or any other prompt for that matter.
   The &quot;lpr <A HREF="starting.html#-r">-r</A> tempfile&quot; command prints the resulting &quot;<A HREF="change.html#tempfile">tempfile</A>&quot; and deletes
<A HREF="motion.html#it">it</A> (that's what the <A HREF="starting.html#-r">-r</A> argument does).


READING FROM STDIN

Vim can read text on standard input.  Since the normal way is to read commands
there, you must tell Vim to read text instead.  This is done by passing the
&quot;<A HREF="motion.html#-">-</A>&quot; argument in place of a file.  Example:

<B>	ls | vim -</B>

This allows you to edit the output of the &quot;ls&quot; command, without first saving
the text in a file.
   If you use the standard input to read text from, you can use the &quot;<A HREF="starting.html#-S">-S</A>&quot;
argument to read a <A HREF="usr_41.html#script">script</A>:

<B>	producer | vim -S change.vim -</B>


NORMAL MODE SCRIPTS

If you really want to use <A HREF="intro.html#Normal">Normal</A> mode commands in a <A HREF="usr_41.html#script">script</A>, you can use <A HREF="motion.html#it">it</A>
like this:

<B>	vim -s script file.txt ...</B>
 
	Note:
	&quot;<A HREF="starting.html#-s">-s</A>&quot; has a different meaning when <A HREF="motion.html#it">it</A> is used without &quot;<A HREF="starting.html#-e">-e</A>&quot;.  Here <A HREF="motion.html#it">it</A>
	means to source the &quot;<A HREF="usr_41.html#script">script</A>&quot; <A HREF="motion.html#as">as</A> <A HREF="intro.html#Normal">Normal</A> mode commands.  When used with
	&quot;<A HREF="starting.html#-e">-e</A>&quot; <A HREF="motion.html#it">it</A> means to be silent, and doesn't use the next argument <A HREF="motion.html#as">as</A> a
	file name.

The commands in &quot;<A HREF="usr_41.html#script">script</A>&quot; are executed like you typed them.  Don't forget that
a line break is interpreted <A HREF="motion.html#as">as</A> pressing <A HREF="intro.html#&lt;Enter&gt;">&lt;Enter&gt;</A>.  In <A HREF="intro.html#Normal">Normal</A> mode that moves
the cursor to the next line.
   To create the <A HREF="usr_41.html#script">script</A> you can edit the <A HREF="usr_41.html#script">script</A> file and type the commands.
You need to imagine what the result would be, which can be a bit difficult.
Another way is to record the commands while you perform them manually.  This
is how you <A HREF="diff.html#do">do</A> that:

<B>	vim -w script file.txt ...</B>

All typed keys will be written to &quot;<A HREF="usr_41.html#script">script</A>&quot;.  If you make a small mistake you
can just continue and remember to edit the <A HREF="usr_41.html#script">script</A> later.
   The &quot;<A HREF="starting.html#-w">-w</A>&quot; argument appends to an existing <A HREF="usr_41.html#script">script</A>.  That is good when you
want to record the <A HREF="usr_41.html#script">script</A> bit by bit.  If you want to start from scratch and
start all over, use the &quot;<A HREF="starting.html#-W">-W</A>&quot; argument.  It overwrites any existing file.

==============================================================================

Next chapter: |<A HREF="usr_27.html">usr_27.txt</A>|  Search commands and patterns

Copyright: see |<A HREF="usr_01.html#manual-copyright">manual-copyright</A>|  vim:tw=78:ts=8:noet:ft=help:norl:
<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
    </div>

    <footer>
      <div class="container">
        Generated Sun Jul 11 05:28:49 UTC 2021 from <a href="https://github.com/neovim/neovim/commit/79fe9dedcfede1d2038b47a21f21a995051deaa2"><code>79fe9de</code></a>.
      </div>
    </footer>
  </body>
</html>
