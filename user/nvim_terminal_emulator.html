<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Nvim documentation: nvim_terminal_emulator</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="/css/normalize.min.css" rel="stylesheet">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <header class="container">
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a href="/" class="navbar-brand">
            <svg xmlns="http://www.w3.org/2000/svg" style="height: 2.5em" viewBox="0 0 742 214">
              <defs>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="a">
                  <stop stop-color="#16B0ED" stop-opacity=".8" offset="0%" />
                  <stop stop-color="#0F59B2" stop-opacity=".837" offset="100%" />
                </linearGradient>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="b">
                  <stop stop-color="#7DB643" offset="0%" />
                  <stop stop-color="#367533" offset="100%" />
                </linearGradient>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="c">
                  <stop stop-color="#88C649" stop-opacity=".8" offset="0%" />
                  <stop stop-color="#439240" stop-opacity=".84" offset="100%" />
                </linearGradient>
              </defs>
              <g fill="none" fill-rule="evenodd">
                <path
                  d="M.027 45.459L45.224-.173v212.171L.027 166.894V45.459z"
                  fill="url(#a)"
                  transform="translate(1 1)"
                />
                <path
                  d="M129.337 45.89L175.152-.149l-.928 212.146-45.197-45.104.31-121.005z"
                  fill="url(#b)"
                  transform="matrix(-1 0 0 1 305 1)"
                />
                <path
                  d="M45.194-.137L162.7 179.173l-32.882 32.881L12.25 33.141 45.194-.137z"
                  fill="url(#c)"
                  transform="translate(1 1)"
                />
                <path
                  d="M46.234 84.032l-.063 7.063-36.28-53.563 3.36-3.422 32.983 49.922z"
                  fill-opacity=".13"
                  fill="#000"
                />
                <g fill="#444">
                  <path
                    d="M227 154V64.44h4.655c1.55 0 2.445.75 2.685 2.25l.806 13.502c4.058-5.16 8.786-9.316 14.188-12.466 5.4-3.15 11.413-4.726 18.037-4.726 4.893 0 9.205.781 12.935 2.34 3.729 1.561 6.817 3.811 9.264 6.751 2.448 2.942 4.297 6.48 5.55 10.621 1.253 4.14 1.88 8.821 1.88 14.042V154h-8.504V96.754c0-8.402-1.91-14.987-5.729-19.757-3.82-4.771-9.667-7.156-17.544-7.156-5.851 0-11.28 1.516-16.292 4.545-5.013 3.032-9.489 7.187-13.427 12.467V154H227zM350.624 63c5.066 0 9.755.868 14.069 2.605 4.312 1.738 8.052 4.268 11.219 7.592s5.638 7.412 7.419 12.264C385.11 90.313 386 95.883 386 102.17c0 1.318-.195 2.216-.588 2.696-.393.48-1.01.719-1.851.719h-64.966v1.70c0 6.708.784 12.609 2.353 17.7 1.567 5.09 3.8 9.357 6.695 12.802 2.895 3.445 6.393 6.034 10.495 7.771 4.1 1.738 8.686 2.606 13.752 2.606 4.524 0 8.446-.494 11.762-1.483 3.317-.988 6.108-2.097 8.37-3.324 2.261-1.227 4.056-2.336 5.383-3.324 1.326-.988 2.292-1.482 2.895-1.482.784 0 1.388.3 1.81.898l2.352 2.875c-1.448 1.797-3.362 3.475-5.745 5.031-2.383 1.558-5.038 2.891-7.962 3.998-2.926 1.109-6.062 1.991-9.41 2.65a52.21 52.21 0 01-10.088.989c-6.152 0-11.762-1.064-16.828-3.19-5.067-2.125-9.415-5.225-13.043-9.298-3.63-4.074-6.435-9.06-8.415-14.96C310.99 121.655 310 114.9 310 107.294c0-6.408.92-12.323 2.76-17.744 1.84-5.421 4.493-10.093 7.961-14.016 3.467-3.922 7.72-6.991 12.758-9.209C338.513 64.11 344.229 63 350.624 63zm.573 6c-4.696 0-8.904.702-12.623 2.105-3.721 1.404-6.936 3.421-9.65 6.053-2.713 2.631-4.908 5.79-6.586 9.474S319.55 94.439 319 99h60c0-4.679-.672-8.874-2.013-12.588-1.343-3.712-3.232-6.856-5.67-9.43-2.44-2.571-5.367-4.545-8.782-5.92-3.413-1.374-7.192-2.062-11.338-2.062zM435.546 63c6.526 0 12.368 1.093 17.524 3.28 5.154 2.186 9.5 5.286 13.04 9.298 3.538 4.013 6.238 8.85 8.099 14.51 1.861 5.66 2.791 11.994 2.791 19.002 0 7.008-.932 13.327-2.791 18.957-1.861 5.631-4.561 10.452-8.099 14.465-3.54 4.012-7.886 7.097-13.04 9.254-5.156 2.156-10.998 3.234-17.524 3.234-6.529 0-12.369-1.078-17.525-3.234-5.155-2.157-9.517-5.242-13.085-9.254-3.57-4.013-6.285-8.836-8.145-14.465-1.861-5.63-2.791-11.95-2.791-18.957 0-7.008.93-13.342 2.791-19.002 1.861-5.66 4.576-10.496 8.145-14.51 3.568-4.012 7.93-7.112 13.085-9.299C423.177 64.094 429.017 63 435.546 63zm-.501 86c5.341 0 10.006-.918 13.997-2.757 3.99-1.838 7.32-4.474 9.992-7.909 2.67-3.435 4.664-7.576 5.986-12.428 1.317-4.85 1.98-10.288 1.98-16.316 0-5.965-.66-11.389-1.98-16.27-1.322-4.88-3.316-9.053-5.986-12.519-2.67-3.463-6-6.13-9.992-7.999-3.991-1.867-8.657-2.802-13.997-2.802s-10.008.935-13.997 2.802c-3.991 1.87-7.322 4.536-9.992 8-2.671 3.465-4.68 7.637-6.03 12.518-1.35 4.881-2.026 10.305-2.026 16.27 0 6.026.675 11.465 2.025 16.316 1.35 4.852 3.36 8.993 6.031 12.428 2.67 3.435 6 6.07 9.992 7.91 3.99 1.838 8.656 2.756 13.997 2.756z"
                    fill="currentColor"
                  />
                  <path
                    d="M530.57 152h-20.05L474 60h18.35c1.61 0 2.967.39 4.072 1.166 1.103.778 1.865 1.763 2.283 2.959l17.722 49.138a92.762 92.762 0 012.551 8.429c.686 2.751 1.298 5.5 1.835 8.25.537-2.75 1.148-5.499 1.835-8.25a77.713 77.713 0 012.64-8.429l18.171-49.138c.417-1.196 1.164-2.181 2.238-2.96 1.074-.776 2.356-1.165 3.849-1.165H567l-36.43 92zM572 61h23v92h-23zM610 153V60.443h13.624c2.887 0 4.78 1.354 5.682 4.06l1.443 6.856a52.7 52.7 0 015.097-4.962 32.732 32.732 0 015.683-3.879 30.731 30.731 0 016.496-2.57c2.314-.632 4.855-.948 7.624-.948 5.832 0 10.63 1.579 14.39 4.736 3.758 3.157 6.57 7.352 8.434 12.585 1.444-3.068 3.248-5.698 5.413-7.894 2.165-2.194 4.541-3.984 7.127-5.367a32.848 32.848 0 018.254-3.068 39.597 39.597 0 018.796-.992c5.111 0 9.653.783 13.622 2.345 3.97 1.565 7.307 3.849 10.014 6.857 2.706 3.007 4.766 6.675 6.18 11.005C739.29 83.537 740 88.5 740 94.092V153h-22.284V94.092c0-5.894-1.294-10.329-3.878-13.306-2.587-2.977-6.376-4.465-11.368-4.465-2.286 0-4.404.391-6.358 1.172a15.189 15.189 0 00-5.144 3.383c-1.473 1.474-2.631 3.324-3.474 5.548-.842 2.225-1.263 4.781-1.263 7.668V153h-22.37V94.092c0-6.194-1.249-10.704-3.744-13.532-2.497-2.825-6.18-4.24-11.051-4.24-3.19 0-6.18.798-8.976 2.391-2.799 1.593-5.399 3.775-7.804 6.54V153H610zM572 30h23v19h-23z"
                    fill="currentColor"
                    fill-opacity=".8"
                  />
                </g>
              </g>
            </svg>
          </a>
        </div>
      </nav>
    </header>

    <div class="container">
      <h1>Nvim documentation: nvim_terminal_emulator</h1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="terminal_emulator.txt"></A><B>terminal_emulator.txt</B>*   Nvim


		 NVIM REFERENCE MANUAL    by Thiago de Arruda



Terminal emulator				*<A NAME="terminal"></A><B>terminal</B>* *<A NAME="terminal-emulator"></A><B>terminal-emulator</B>*

Nvim embeds a VT220/xterm <A HREF="#terminal">terminal</A> emulator based on libvterm. The <A HREF="#terminal">terminal</A> is
presented <A HREF="motion.html#as">as</A> a special <A HREF="options.html#'buftype'">'buftype'</A>, asynchronously updated <A HREF="motion.html#as">as</A> data is received
from the connected program.

Terminal <A HREF="windows.html#buffers">buffers</A> behave like normal <A HREF="windows.html#buffers">buffers</A>, except:
- With <A HREF="options.html#'modifiable'">'modifiable'</A>, lines can be edited but not deleted.
- <A HREF="options.html#'scrollback'">'scrollback'</A> controls how many lines are kept.
- Output is followed if the cursor is on the last line.
- <A HREF="options.html#'modified'">'modified'</A> is the default. You can set <A HREF="options.html#'nomodified'">'nomodified'</A> to avoid a warning when
  closing the <A HREF="#terminal">terminal</A> buffer.
- <A HREF="options.html#'bufhidden'">'bufhidden'</A> defaults to &quot;hide&quot;.

				      Type |<A HREF="various.html#gO">gO</A>| to see the table of contents.

==============================================================================

Start						*<A NAME="terminal-start"></A><B>terminal-start</B>*

There are several ways to create a <A HREF="#terminal">terminal</A> buffer:

- Invoke the |<A HREF="various.html#:terminal">:terminal</A>| command.
- Call the |<A HREF="eval.html#termopen()">termopen()</A>| function.
- Edit a file with a name matching `term://(.{-}//(\d+:)?)?\zs.*`.
  For example:

<B>    :edit term://bash</B>
<B>    :vsplit term://top</B>
 
    Note: The &quot;term://&quot; <A HREF="pattern.html#pattern">pattern</A> is handled by a <A HREF="autocmd.html#BufReadCmd">BufReadCmd</A> handler, so the
    |<A HREF="autocmd.html#autocmd-nested">autocmd-nested</A>| modifier is required to use <A HREF="motion.html#it">it</A> in an autocmd.
<B>        autocmd VimEnter * ++nested split term://sh</B>
     This is only mentioned for reference; use |<A HREF="various.html#:terminal">:terminal</A>| instead.

When the <A HREF="#terminal">terminal</A> starts, the buffer contents are updated and the buffer is
named in the form of `term://{cwd}//{pid}:{cmd}`. This naming scheme is used
by |<A HREF="starting.html#:mksession">:mksession</A>| to restore a <A HREF="#terminal">terminal</A> buffer (by restarting the {cmd}).

==============================================================================

Input						*<A NAME="terminal-input"></A><B>terminal-input</B>*

To send input, enter |<A HREF="intro.html#Terminal-mode">Terminal-mode</A>| using any command that would enter &quot;insert
mode&quot; in a normal buffer, such <A HREF="motion.html#as">as</A> |<A HREF="insert.html#i">i</A>| or |<A HREF="insert.html#:startinsert">:startinsert</A>|. In this mode all keys
except &lt;C-\&gt;&lt;C-N&gt; are sent to the underlying program. Use &lt;C-\&gt;&lt;C-N&gt; to return
to normal-mode. |<A HREF="intro.html#CTRL-\_CTRL-N">CTRL-\_CTRL-N</A>|

<A HREF="intro.html#Terminal-mode">Terminal-mode</A> forces these local <A HREF="options.html#options">options</A>:

    <A HREF="options.html#'nocursorline'">'nocursorline'</A>
    <A HREF="options.html#'nocursorcolumn'">'nocursorcolumn'</A>
    <A HREF="options.html#'scrolloff'">'scrolloff'</A> = 0
    <A HREF="options.html#'sidescrolloff'">'sidescrolloff'</A> = 0

<A HREF="intro.html#Terminal-mode">Terminal-mode</A> has its own |<A HREF="map.html#:tnoremap">:tnoremap</A>| namespace for mappings, this can be used
to automate any <A HREF="#terminal">terminal</A> interaction.

To map <A HREF="intro.html#&lt;Esc&gt;">&lt;Esc&gt;</A> to exit terminal-mode:
<B>    :tnoremap &lt;Esc&gt; &lt;C-\&gt;&lt;C-n&gt;</B>

To simulate |<A HREF="insert.html#i_CTRL-R">i_CTRL-R</A>| in terminal-mode:
<B>    :tnoremap &lt;expr&gt; &lt;C-R&gt; '&lt;C-\&gt;&lt;C-N&gt;"'.nr2char(getchar()).'pi'</B>

To use `ALT+{h,j,k,l}` to navigate <A HREF="windows.html#windows">windows</A> from any mode:
<B>    :tnoremap &lt;A-h&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;h</B>
<B>    :tnoremap &lt;A-j&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;j</B>
<B>    :tnoremap &lt;A-k&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;k</B>
<B>    :tnoremap &lt;A-l&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;l</B>
<B>    :inoremap &lt;A-h&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;h</B>
<B>    :inoremap &lt;A-j&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;j</B>
<B>    :inoremap &lt;A-k&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;k</B>
<B>    :inoremap &lt;A-l&gt; &lt;C-\&gt;&lt;C-N&gt;&lt;C-w&gt;l</B>
<B>    :nnoremap &lt;A-h&gt; &lt;C-w&gt;h</B>
<B>    :nnoremap &lt;A-j&gt; &lt;C-w&gt;j</B>
<B>    :nnoremap &lt;A-k&gt; &lt;C-w&gt;k</B>
<B>    :nnoremap &lt;A-l&gt; &lt;C-w&gt;l</B>

Mouse input has the following behavior:

- If the program has enabled mouse <A HREF="autocmd.html#events">events</A>, the corresponding <A HREF="autocmd.html#events">events</A> will be
  forwarded to the program.
- If mouse <A HREF="autocmd.html#events">events</A> are disabled (the default), <A HREF="#terminal">terminal</A> focus will be lost and
  the event will be processed <A HREF="motion.html#as">as</A> in a normal buffer.
- If another <A HREF="windows.html#window">window</A> is clicked, <A HREF="#terminal">terminal</A> focus will be lost and <A HREF="nvim.html#nvim">nvim</A> will jump
  to the clicked <A HREF="windows.html#window">window</A>
- If the mouse wheel is used while the mouse is positioned in another <A HREF="windows.html#window">window</A>,
  the <A HREF="#terminal">terminal</A> wont lose focus and the hovered <A HREF="windows.html#window">window</A> will be scrolled.

==============================================================================

Configuration					*<A NAME="terminal-config"></A><B>terminal-config</B>*

Options:		<A HREF="options.html#'modified'">'modified'</A>, <A HREF="options.html#'scrollback'">'scrollback'</A>
Events:			|<A HREF="autocmd.html#TermOpen">TermOpen</A>|, |<A HREF="autocmd.html#TermEnter">TermEnter</A>|, |<A HREF="autocmd.html#TermLeave">TermLeave</A>|, |<A HREF="autocmd.html#TermClose">TermClose</A>|
Highlight groups:	|<A HREF="syntax.html#hl-TermCursor">hl-TermCursor</A>|, |<A HREF="syntax.html#hl-TermCursorNC">hl-TermCursorNC</A>|

Terminal sets local defaults for some <A HREF="options.html#options">options</A>, which may differ from your
global configuration.

- <A HREF="options.html#'list'">'list'</A> is disabled
- <A HREF="options.html#'wrap'">'wrap'</A> is disabled

You can change the defaults with a <A HREF="autocmd.html#TermOpen">TermOpen</A> <A HREF="autocmd.html#autocommand">autocommand</A>:
<B>    au TermOpen * setlocal list</B>

<B><FONT color="#54A23D">TERMINAL COLORS </FONT></B>

The `{g,b}:terminal_color_x` <A HREF="eval.html#variables">variables</A> <A HREF="intro.html#control">control</A> the <A HREF="#terminal">terminal</A> color palette,
where `x` is the color index between 0 and 255 <A HREF="motion.html#inclusive">inclusive</A>.  The <A HREF="eval.html#variables">variables</A> are
read during |<A HREF="autocmd.html#TermOpen">TermOpen</A>|. The value must be a color name or hexadecimal <A HREF="eval.html#string">string</A>.
Example:
<B>    let g:terminal_color_4 = '#ff0000'</B>
<B>    let g:terminal_color_5 = 'green'</B>
Only works for RGB UIs (see 'termguicolors'); for 256-color terminals the
color index is just forwarded.

Editor highlighting (|<A HREF="syntax.html#syntax-highlighting">syntax-highlighting</A>|, |<A HREF="syntax.html#highlight-groups">highlight-groups</A>|, etc.) has
higher precedence: <A HREF="motion.html#it">it</A> is applied after <A HREF="#terminal">terminal</A> colors are resolved.

==============================================================================

Status Variables				*<A NAME="terminal-status"></A><B>terminal-status</B>*

Terminal <A HREF="windows.html#buffers">buffers</A> maintain some buffer-local <A HREF="eval.html#variables">variables</A> and <A HREF="options.html#options">options</A>. The values
are initialized before <A HREF="autocmd.html#TermOpen">TermOpen</A>, so you can use them in a local <A HREF="options.html#'statusline'">'statusline'</A>.
Example:
<B>    :autocmd TermOpen * setlocal statusline=%{b:term_title}</B>


- *<A NAME="b:term_title"></A><B>b:term_title</B>*  Terminal title (user-writable), typically displayed in the
  <A HREF="windows.html#window">window</A> title or <A HREF="intro.html#tab">tab</A> title of a graphical <A HREF="#terminal">terminal</A> emulator. Terminal
  programs can set this by emitting an <A HREF="intro.html#escape">escape</A> sequence.
- |<A HREF="options.html#'channel'">'channel'</A>|  Terminal PTY |<A HREF="job_control.html#job-id">job-id</A>|.  Can be used with |<A HREF="eval.html#chansend()">chansend()</A>| to send
  input to the <A HREF="#terminal">terminal</A>.

Use |<A HREF="eval.html#jobwait()">jobwait()</A>| to check if the <A HREF="#terminal">terminal</A> job has finished:
<B>    let running = jobwait([&amp;channel], 0)[0] == -1</B>

==============================================================================

<A HREF="#:Termdebug">:Termdebug</A> <A HREF="usr_05.html#plugin">plugin</A>				*<A NAME="terminal-debug"></A><B>terminal-debug</B>*

The Terminal debugging <A HREF="usr_05.html#plugin">plugin</A> can be used to debug a program with <A HREF="debug.html#gdb">gdb</A> and view
the source code in a Vim <A HREF="windows.html#window">window</A>.  Since this is completely contained inside
Vim this also works remotely over an ssh connection.

<B><FONT color="#54A23D">Starting </FONT></B>

							*<A NAME="termdebug-starting"></A><B>termdebug-starting</B>*
Load the <A HREF="usr_05.html#plugin">plugin</A> with this command:
<B>	packadd termdebug</B>

 							*<A NAME=":Termdebug"></A><B>:Termdebug</B>*
To start debugging use `:Termdebug` or `:TermdebugCommand` followed by the
command name, for example:
<B>	:Termdebug vim</B>

This opens two <A HREF="windows.html#windows">windows</A>:

<A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>	A <A HREF="#terminal">terminal</A> <A HREF="windows.html#window">window</A> in which &quot;<A HREF="debug.html#gdb">gdb</A> vim&quot; is executed.  Here you
		can directly interact with <A HREF="debug.html#gdb">gdb</A>.  The buffer name is &quot;!gdb&quot;.

program <A HREF="windows.html#window">window</A>	A <A HREF="#terminal">terminal</A> <A HREF="windows.html#window">window</A> for the executed program.  When &quot;run&quot; is
		used in <A HREF="debug.html#gdb">gdb</A> the program I/O will happen in this <A HREF="windows.html#window">window</A>, so
		that <A HREF="motion.html#it">it</A> does not interfere with controlling <A HREF="debug.html#gdb">gdb</A>.  The buffer
		name is &quot;<A HREF="debug.html#gdb">gdb</A> program&quot;.

The current <A HREF="windows.html#window">window</A> is used to show the source code.  When <A HREF="debug.html#gdb">gdb</A> pauses the
source file location will be displayed, if possible.  A sign is used to
highlight the current position, using highlight group debugPC.	 

If the buffer in the current <A HREF="windows.html#window">window</A> is modified, another <A HREF="windows.html#window">window</A> will be opened
to display the current <A HREF="debug.html#gdb">gdb</A> position.

Focus the <A HREF="#terminal">terminal</A> of the executed program to interact with <A HREF="motion.html#it">it</A>.  This works
the same <A HREF="motion.html#as">as</A> any command running in a <A HREF="#terminal">terminal</A> <A HREF="windows.html#window">window</A>.

When the debugger ends, typically by typing &quot;quit&quot; in the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>, the two
opened <A HREF="windows.html#windows">windows</A> are closed.

Only one debugger can be active at a time.

							*<A NAME=":TermdebugCommand"></A><B>:TermdebugCommand</B>*
If you want to give specific commands to the command being debugged, you can
use the `:TermdebugCommand` command followed by the command name and
additional parameters.
<B>	:TermdebugCommand vim --clean -c ':set nu'</B>

Both the `:Termdebug` and `:TermdebugCommand` support an optional &quot;<A HREF="change.html#!">!</A>&quot; bang
argument to start the command right away, without pausing at the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>
(and cursor will be in the debugged <A HREF="windows.html#window">window</A>).  For example:
<B>	:TermdebugCommand! vim --clean</B>

To attach <A HREF="debug.html#gdb">gdb</A> to an already running executable or use a core file, pass extra
arguments.  E.g.:
<B>	:Termdebug vim core</B>
<B>	:Termdebug vim 98343</B>

If no argument is given, you'll end up in a <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>, in which you need to
specify which command to run using e.g. the <A HREF="debug.html#gdb">gdb</A> `file` command.


<B><FONT color="#54A23D">Example session </FONT></B>

							*<A NAME="termdebug-example"></A><B>termdebug-example</B>*
Start in the Vim &quot;src&quot; directory and build Vim:
<B>	% make</B>
Start Vim:
<B>	% ./vim</B>
Load the termdebug <A HREF="usr_05.html#plugin">plugin</A> and start debugging Vim:
<B>	:packadd termdebug</B>
<B>	:Termdebug vim</B>
You should now have three <A HREF="windows.html#windows">windows</A>:
    source  - where you started
    <A HREF="debug.html#gdb">gdb</A>	    - you can type <A HREF="debug.html#gdb">gdb</A> commands here
    program - the executed program will use this <A HREF="windows.html#window">window</A>

Put focus on the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A> and type:
<B>	break ex_help</B>
<B>	run</B>
Vim will start running in the program <A HREF="windows.html#window">window</A>. Put focus there and type:
<B>	:help gui</B>
Gdb will run into the ex_help breakpoint.  The source <A HREF="windows.html#window">window</A> now shows the 
ex_cmds.c file.  A red &quot;1 &quot; marker will appear in the signcolumn where the
breakpoint was set.  The line where the debugger stopped is highlighted.  You
can now step through the program.  You will see the highlighting move <A HREF="motion.html#as">as</A> the
debugger executes a line of source code.

Run &quot;<A HREF="editing.html#:Next">:Next</A>&quot; a few times until the for loop is highlighted.  Put the cursor on
the end of &quot;eap-&gt;arg&quot;, then call &quot;:Eval&quot;.  You will see this displayed:
<B><FONT color="#54A23D">	"eap-&gt;arg": 0x555555e68855 "gui" </FONT></B>
This way you can inspect the value of local <A HREF="eval.html#variables">variables</A>.  You can also focus the
<A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A> and use a &quot;print&quot; command, e.g.:
<B>	print *eap</B>
If mouse pointer movements are working, Vim will also show a balloon when the
mouse rests on text that can be evaluated by <A HREF="debug.html#gdb">gdb</A>.
You can also use the &quot;<A HREF="various.html#K">K</A>&quot; <A HREF="map.html#mapping">mapping</A> that will either use neovim floating <A HREF="windows.html#windows">windows</A>
if available to show the results or print below the status <A HREF="motion.html#bar">bar</A>.

Now go back to the source <A HREF="windows.html#window">window</A> and put the cursor on the first line after
the for loop, then type:
<B>	:Break</B>
You will see a &quot;1&quot; marker appear, this indicates the new breakpoint.  Now
run &quot;:Cont&quot; command and the code until the breakpoint will be executed.

You can type more advanced commands in the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>.  For example, type:
<B>	watch curbuf</B>
Now run &quot;:Cont&quot; (or type &quot;cont&quot; in the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>). Execution
will now continue until the value of &quot;curbuf&quot; changes, which is in do_ecmd().
To remove this watchpoint again type in the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>:
<B>	delete 3</B>

You can see the stack by typing in the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>:
<B>	where</B>
Move through the stack frames, e.g. with:
<B>	frame 3</B>
The source <A HREF="windows.html#window">window</A> will show the code, at the point where the call was made to
a deeper level.


<B><FONT color="#54A23D">Stepping through code </FONT></B>

							*<A NAME="termdebug-stepping"></A><B>termdebug-stepping</B>*
Put focus on the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A> to type commands there.  Some common ones are:
- <A HREF="pattern.html#CTRL-C">CTRL-C</A>	interrupt the program
- next		execute the current line and stop at the next line
- step		execute the current line and stop at the next statement,
		entering <A HREF="eval.html#functions">functions</A>
- finish	execute until leaving the current function
- where		show the stack
- frame N	go to the Nth stack frame
- continue	continue execution


						*<A NAME=":Run"></A><B>:Run</B>* *<A NAME=":Arguments"></A><B>:Arguments</B>*
In the <A HREF="windows.html#window">window</A> showing the source code these commands can be used to <A HREF="intro.html#control">control</A>
<A HREF="debug.html#gdb">gdb</A>:
 `:Run` [args]	    run the program with [args] or the previous arguments
 `:Arguments` {args}  set arguments for the next `:Run`


 *<A NAME=":Break"></A><B>:Break</B>*	set a breakpoint at the current line; a sign will be displayed

 *<A NAME=":Clear"></A><B>:Clear</B>*	delete the breakpoint at the current line


 *<A NAME=":Step"></A><B>:Step</B>*	execute the <A HREF="debug.html#gdb">gdb</A> &quot;step&quot; command

 *<A NAME=":Over"></A><B>:Over</B>*	execute the <A HREF="debug.html#gdb">gdb</A> &quot;next&quot; command (`:Next` is a Vim command)

 *<A NAME=":Finish"></A><B>:Finish</B>*	execute the <A HREF="debug.html#gdb">gdb</A> &quot;finish&quot; command

 *<A NAME=":Continue"></A><B>:Continue</B>*	execute the <A HREF="debug.html#gdb">gdb</A> &quot;continue&quot; command

 *<A NAME=":Stop"></A><B>:Stop</B>*	interrupt the program

If <A HREF="debug.html#gdb">gdb</A> stops at a source line and there is no <A HREF="windows.html#window">window</A> currently showing the
source code, a new <A HREF="windows.html#window">window</A> will be created for the source code.  This also
happens if the buffer in the source code <A HREF="windows.html#window">window</A> has been modified and can't be
abandoned.

Gdb gives each breakpoint a number.  In Vim the number shows up in the sign
column, with a red background.  You can use these <A HREF="debug.html#gdb">gdb</A> commands:
- info break	<A HREF="eval.html#list">list</A> breakpoints
- delete N	delete breakpoint N
You can also use the `:Clear` command if the cursor is in the line with the
breakpoint, or use the &quot;Clear breakpoint&quot; right-click menu entry.


<B><FONT color="#54A23D">Inspecting variables </FONT></B>

					*<A NAME="termdebug-variables"></A><B>termdebug-variables</B>* *<A NAME=":Evaluate"></A><B>:Evaluate</B>*
 `:Evaluate`	    evaluate the <A HREF="eval.html#expression">expression</A> under the cursor
 `K`		    same
 `:Evaluate` {expr}   evaluate {expr}
 `:'&lt;,'&gt;Evaluate`     evaluate the Visually selected text

This is similar to using &quot;print&quot; in the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>.
You can usually shorten `:Evaluate` to `:Ev`.


<B><FONT color="#54A23D">Other commands </FONT></B>

							*<A NAME="termdebug-commands"></A><B>termdebug-commands</B>*

 *<A NAME=":Gdb"></A><B>:Gdb</B>*	     jump to the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A>

 *<A NAME=":Program"></A><B>:Program</B>*    jump to the <A HREF="windows.html#window">window</A> with the running program

 *<A NAME=":Source"></A><B>:Source</B>*     jump to the <A HREF="windows.html#window">window</A> with the source code, create <A HREF="motion.html#it">it</A> if there
	     isn't one

 *<A NAME=":Asm"></A><B>:Asm</B>*	     jump to the <A HREF="windows.html#window">window</A> with the disassembly, create <A HREF="motion.html#it">it</A> if there
	     isn't one


<B><FONT color="#54A23D">Prompt mode </FONT></B>

						*<A NAME="termdebug-prompt"></A><B>termdebug-prompt</B>*
When on MS-Windows, <A HREF="debug.html#gdb">gdb</A> will run in a buffer with <A HREF="options.html#'buftype'">'buftype'</A> set to &quot;prompt&quot;.
This works slightly differently:
- The <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A> will be in <A HREF="insert.html#Insert">Insert</A> mode while typing commands.  Go to <A HREF="intro.html#Normal">Normal</A>
  mode with <A HREF="intro.html#&lt;Esc&gt;">&lt;Esc&gt;</A>, then you can move around in the buffer, copy/paste, etc.
  Go back to editing the <A HREF="debug.html#gdb">gdb</A> command with any command that starts <A HREF="insert.html#Insert">Insert</A> mode,
  such <A HREF="motion.html#as">as</A> `a` or `i`.
- A separate <A HREF="various.html#:terminal">:terminal</A> <A HREF="windows.html#window">window</A> will be opened to run the debugged program in.


						*<A NAME="termdebug_use_prompt"></A><B>termdebug_use_prompt</B>*
Prompt mode can be used with:
<B>	let g:termdebug_use_prompt = 1</B>

 

						*<A NAME="termdebug_disasm_window"></A><B>termdebug_disasm_window</B>*
If you want the Asm <A HREF="windows.html#window">window</A> shown by default, set this to 1. Setting to
any value greater than 1 will set the Asm <A HREF="windows.html#window">window</A> height to that value:
<B>	let g:termdebug_disasm_window = 15</B>
 

<B><FONT color="#54A23D">Communication </FONT></B>

						*<A NAME="termdebug-communication"></A><B>termdebug-communication</B>*
There is another, hidden, buffer, which is used for Vim to communicate with
<A HREF="debug.html#gdb">gdb</A>.  The buffer name is &quot;<A HREF="debug.html#gdb">gdb</A> communication&quot;.  Do not delete this buffer, <A HREF="motion.html#it">it</A>
will break the debugger.

Gdb has some weird behavior, the <A HREF="usr_05.html#plugin">plugin</A> does its best to work around that.
For example, after typing &quot;continue&quot; in the <A HREF="debug.html#gdb">gdb</A> <A HREF="windows.html#window">window</A> a <A HREF="pattern.html#CTRL-C">CTRL-C</A> can be used to
interrupt the running program.  But after using the MI command
&quot;-exec-continue&quot;  pressing <A HREF="pattern.html#CTRL-C">CTRL-C</A> does not interrupt.  Therefore you will see
&quot;continue&quot; being used for the `:Continue` command, instead of using the
communication <A HREF="channel.html#channel">channel</A>.


<B><FONT color="#54A23D">Customizing </FONT></B>


GDB command						 *<A NAME="termdebug-customizing"></A><B>termdebug-customizing</B>*

To change the name of the <A HREF="debug.html#gdb">gdb</A> command, set the &quot;termdebugger&quot; variable before
invoking `:Termdebug`:
<B>	let termdebugger = "mygdb"</B>

To not use neovim floating <A HREF="windows.html#windows">windows</A> for previewing variable evaluation, set the
`g:termdebug_useFloatingHover` variable like this:
<B>	let g:termdebug_useFloatingHover = 0</B>

If you are a mouse person, you can also define a <A HREF="map.html#mapping">mapping</A> using your right
click to one of the <A HREF="#terminal">terminal</A> command like evaluate the variable under the
cursor:
<B>      	nnoremap &lt;RightMouse&gt; :Evaluate&lt;CR&gt;</B>
or set/unset a breakpoint:
<B>	nnoremap &lt;RightMouse&gt; :Break&lt;CR&gt;</B>


 							*<A NAME="gdb-version"></A><B>gdb-version</B>*
Only debuggers fully compatible with <A HREF="debug.html#gdb">gdb</A> will work.  Vim uses the GDB/MI
interface.  The &quot;new-ui&quot; command  requires <A HREF="debug.html#gdb">gdb</A> version 7.12 or later.  if you
get this error:
<B><FONT color="#54A23D">	Undefined command: "new-ui". Try "help".</FONT></B>
Then your <A HREF="debug.html#gdb">gdb</A> is too old.



Colors						*<A NAME="hl-debugPC"></A><B>hl-debugPC</B>* *<A NAME="hl-debugBreakpoint"></A><B>hl-debugBreakpoint</B>*

The color of the <A HREF="sign.html#signs">signs</A> can be adjusted with these highlight groups:
- debugPC		the current position
- debugBreakpoint	a breakpoint

The defaults are, when <A HREF="options.html#'background'">'background'</A> is &quot;light&quot;:
  hi debugPC term=reverse ctermbg=lightblue guibg=lightblue
  hi debugBreakpoint term=reverse ctermbg=red guibg=red

When <A HREF="options.html#'background'">'background'</A> is &quot;dark&quot;:
  hi debugPC term=reverse ctermbg=darkblue guibg=darkblue
  hi debugBreakpoint term=reverse ctermbg=red guibg=red



Shorcuts						*<A NAME="termdebug_shortcuts"></A><B>termdebug_shortcuts</B>*

You can define your own shortcuts (mappings) to <A HREF="intro.html#control">control</A> <A HREF="debug.html#gdb">gdb</A>, that can work in
any <A HREF="windows.html#window">window</A>, using the TermDebugSendCommand() function.  Example:
<B>	map ,w :call TermDebugSendCommand('where')&lt;CR&gt;</B>
The argument is the <A HREF="debug.html#gdb">gdb</A> command.



Vim <A HREF="windows.html#window">window</A> width						*<A NAME="termdebug_wide"></A><B>termdebug_wide</B>*

To change the width of the Vim <A HREF="windows.html#window">window</A> when debugging starts, and use a
vertical split:
<B>  let g:termdebug_wide = 163</B>
This will set &amp;columns to 163 when `:Termdebug` is used.  The value is restored
when quitting the debugger.
If g:termdebug_wide is set and &amp;columns is already larger than
g:termdebug_wide then a vertical split will be used without <A HREF="change.html#changing">changing</A> &amp;columns.
Set <A HREF="motion.html#it">it</A> to 1 to get a vertical split without every <A HREF="change.html#changing">changing</A> &amp;columns (useful
for when the <A HREF="#terminal">terminal</A> can't be resized by Vim).



<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
    </div>

    <footer>
      <div class="container">
        Generated Sun Jul 11 05:28:48 UTC 2021 from <a href="https://github.com/neovim/neovim/commit/79fe9dedcfede1d2038b47a21f21a995051deaa2"><code>79fe9de</code></a>.
      </div>
    </footer>
  </body>
</html>
