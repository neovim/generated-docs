<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Nvim documentation: diff</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="/css/normalize.min.css" rel="stylesheet">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <header class="container">
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a href="/" class="navbar-brand">
            <svg xmlns="http://www.w3.org/2000/svg" style="height: 2.5em" viewBox="0 0 742 214">
              <defs>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="a">
                  <stop stop-color="#16B0ED" stop-opacity=".8" offset="0%" />
                  <stop stop-color="#0F59B2" stop-opacity=".837" offset="100%" />
                </linearGradient>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="b">
                  <stop stop-color="#7DB643" offset="0%" />
                  <stop stop-color="#367533" offset="100%" />
                </linearGradient>
                <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="c">
                  <stop stop-color="#88C649" stop-opacity=".8" offset="0%" />
                  <stop stop-color="#439240" stop-opacity=".84" offset="100%" />
                </linearGradient>
              </defs>
              <g fill="none" fill-rule="evenodd">
                <path
                  d="M.027 45.459L45.224-.173v212.171L.027 166.894V45.459z"
                  fill="url(#a)"
                  transform="translate(1 1)"
                />
                <path
                  d="M129.337 45.89L175.152-.149l-.928 212.146-45.197-45.104.31-121.005z"
                  fill="url(#b)"
                  transform="matrix(-1 0 0 1 305 1)"
                />
                <path
                  d="M45.194-.137L162.7 179.173l-32.882 32.881L12.25 33.141 45.194-.137z"
                  fill="url(#c)"
                  transform="translate(1 1)"
                />
                <path
                  d="M46.234 84.032l-.063 7.063-36.28-53.563 3.36-3.422 32.983 49.922z"
                  fill-opacity=".13"
                  fill="#000"
                />
                <g fill="#444">
                  <path
                    d="M227 154V64.44h4.655c1.55 0 2.445.75 2.685 2.25l.806 13.502c4.058-5.16 8.786-9.316 14.188-12.466 5.4-3.15 11.413-4.726 18.037-4.726 4.893 0 9.205.781 12.935 2.34 3.729 1.561 6.817 3.811 9.264 6.751 2.448 2.942 4.297 6.48 5.55 10.621 1.253 4.14 1.88 8.821 1.88 14.042V154h-8.504V96.754c0-8.402-1.91-14.987-5.729-19.757-3.82-4.771-9.667-7.156-17.544-7.156-5.851 0-11.28 1.516-16.292 4.545-5.013 3.032-9.489 7.187-13.427 12.467V154H227zM350.624 63c5.066 0 9.755.868 14.069 2.605 4.312 1.738 8.052 4.268 11.219 7.592s5.638 7.412 7.419 12.264C385.11 90.313 386 95.883 386 102.17c0 1.318-.195 2.216-.588 2.696-.393.48-1.01.719-1.851.719h-64.966v1.70c0 6.708.784 12.609 2.353 17.7 1.567 5.09 3.8 9.357 6.695 12.802 2.895 3.445 6.393 6.034 10.495 7.771 4.1 1.738 8.686 2.606 13.752 2.606 4.524 0 8.446-.494 11.762-1.483 3.317-.988 6.108-2.097 8.37-3.324 2.261-1.227 4.056-2.336 5.383-3.324 1.326-.988 2.292-1.482 2.895-1.482.784 0 1.388.3 1.81.898l2.352 2.875c-1.448 1.797-3.362 3.475-5.745 5.031-2.383 1.558-5.038 2.891-7.962 3.998-2.926 1.109-6.062 1.991-9.41 2.65a52.21 52.21 0 01-10.088.989c-6.152 0-11.762-1.064-16.828-3.19-5.067-2.125-9.415-5.225-13.043-9.298-3.63-4.074-6.435-9.06-8.415-14.96C310.99 121.655 310 114.9 310 107.294c0-6.408.92-12.323 2.76-17.744 1.84-5.421 4.493-10.093 7.961-14.016 3.467-3.922 7.72-6.991 12.758-9.209C338.513 64.11 344.229 63 350.624 63zm.573 6c-4.696 0-8.904.702-12.623 2.105-3.721 1.404-6.936 3.421-9.65 6.053-2.713 2.631-4.908 5.79-6.586 9.474S319.55 94.439 319 99h60c0-4.679-.672-8.874-2.013-12.588-1.343-3.712-3.232-6.856-5.67-9.43-2.44-2.571-5.367-4.545-8.782-5.92-3.413-1.374-7.192-2.062-11.338-2.062zM435.546 63c6.526 0 12.368 1.093 17.524 3.28 5.154 2.186 9.5 5.286 13.04 9.298 3.538 4.013 6.238 8.85 8.099 14.51 1.861 5.66 2.791 11.994 2.791 19.002 0 7.008-.932 13.327-2.791 18.957-1.861 5.631-4.561 10.452-8.099 14.465-3.54 4.012-7.886 7.097-13.04 9.254-5.156 2.156-10.998 3.234-17.524 3.234-6.529 0-12.369-1.078-17.525-3.234-5.155-2.157-9.517-5.242-13.085-9.254-3.57-4.013-6.285-8.836-8.145-14.465-1.861-5.63-2.791-11.95-2.791-18.957 0-7.008.93-13.342 2.791-19.002 1.861-5.66 4.576-10.496 8.145-14.51 3.568-4.012 7.93-7.112 13.085-9.299C423.177 64.094 429.017 63 435.546 63zm-.501 86c5.341 0 10.006-.918 13.997-2.757 3.99-1.838 7.32-4.474 9.992-7.909 2.67-3.435 4.664-7.576 5.986-12.428 1.317-4.85 1.98-10.288 1.98-16.316 0-5.965-.66-11.389-1.98-16.27-1.322-4.88-3.316-9.053-5.986-12.519-2.67-3.463-6-6.13-9.992-7.999-3.991-1.867-8.657-2.802-13.997-2.802s-10.008.935-13.997 2.802c-3.991 1.87-7.322 4.536-9.992 8-2.671 3.465-4.68 7.637-6.03 12.518-1.35 4.881-2.026 10.305-2.026 16.27 0 6.026.675 11.465 2.025 16.316 1.35 4.852 3.36 8.993 6.031 12.428 2.67 3.435 6 6.07 9.992 7.91 3.99 1.838 8.656 2.756 13.997 2.756z"
                    fill="currentColor"
                  />
                  <path
                    d="M530.57 152h-20.05L474 60h18.35c1.61 0 2.967.39 4.072 1.166 1.103.778 1.865 1.763 2.283 2.959l17.722 49.138a92.762 92.762 0 012.551 8.429c.686 2.751 1.298 5.5 1.835 8.25.537-2.75 1.148-5.499 1.835-8.25a77.713 77.713 0 012.64-8.429l18.171-49.138c.417-1.196 1.164-2.181 2.238-2.96 1.074-.776 2.356-1.165 3.849-1.165H567l-36.43 92zM572 61h23v92h-23zM610 153V60.443h13.624c2.887 0 4.78 1.354 5.682 4.06l1.443 6.856a52.7 52.7 0 015.097-4.962 32.732 32.732 0 015.683-3.879 30.731 30.731 0 016.496-2.57c2.314-.632 4.855-.948 7.624-.948 5.832 0 10.63 1.579 14.39 4.736 3.758 3.157 6.57 7.352 8.434 12.585 1.444-3.068 3.248-5.698 5.413-7.894 2.165-2.194 4.541-3.984 7.127-5.367a32.848 32.848 0 018.254-3.068 39.597 39.597 0 018.796-.992c5.111 0 9.653.783 13.622 2.345 3.97 1.565 7.307 3.849 10.014 6.857 2.706 3.007 4.766 6.675 6.18 11.005C739.29 83.537 740 88.5 740 94.092V153h-22.284V94.092c0-5.894-1.294-10.329-3.878-13.306-2.587-2.977-6.376-4.465-11.368-4.465-2.286 0-4.404.391-6.358 1.172a15.189 15.189 0 00-5.144 3.383c-1.473 1.474-2.631 3.324-3.474 5.548-.842 2.225-1.263 4.781-1.263 7.668V153h-22.37V94.092c0-6.194-1.249-10.704-3.744-13.532-2.497-2.825-6.18-4.24-11.051-4.24-3.19 0-6.18.798-8.976 2.391-2.799 1.593-5.399 3.775-7.804 6.54V153H610zM572 30h23v19h-23z"
                    fill="currentColor"
                    fill-opacity=".8"
                  />
                </g>
              </g>
            </svg>
          </a>
        </div>
      </nav>
    </header>

    <div class="container">
      <h1>Nvim documentation: diff</h1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="diff.txt"></A><B>diff.txt</B>*      Nvim


		  VIM REFERENCE MANUAL    by Bram Moolenaar



							*<A NAME="diff"></A><B>diff</B>* *<A NAME="diff-mode"></A><B>diff-mode</B>*
This file describes the <A HREF="#diff">diff</A> feature: Showing differences between two to
eight versions of the same file.

The basics are explained in section |<A HREF="usr_08.html#08.7">08.7</A>| of the user manual.

                                      Type |<A HREF="various.html#gO">gO</A>| to see the table of contents.

==============================================================================

1. Starting <A HREF="#diff">diff</A> mode					*<A NAME="start-vimdiff"></A><B>start-vimdiff</B>*

To start editing in <A HREF="#diff">diff</A> mode, run &quot;<A HREF="nvim.html#nvim">nvim</A> -d&quot;.  This starts Nvim <A HREF="motion.html#as">as</A> usual, and
additionally sets up for viewing the differences between the arguments.

<B>	nvim -d file1 file2 [file3 [file4]]</B>

In addition to the |<A HREF="starting.html#-d">-d</A>| argument, |<A HREF="starting.html#-R">-R</A>| may be used for readonly mode.

The second and following arguments may also be a directory name.  Vim will
then append the file name of the first argument to the directory name to find
the file.

By default an internal <A HREF="#diff">diff</A> library will be used.  When <A HREF="options.html#'diffopt'">'diffopt'</A> or
<A HREF="options.html#'diffexpr'">'diffexpr'</A> has been set an external &quot;<A HREF="#diff">diff</A>&quot; command will be used.  This only
works when such a <A HREF="#diff">diff</A> program is available.

Diffs are local to the current tab page |<A HREF="tabpage.html#tab-page">tab-page</A>|.  You can't see diffs with
a <A HREF="windows.html#window">window</A> in another <A HREF="intro.html#tab">tab</A> page.  This does make <A HREF="motion.html#it">it</A> possible to have several
diffs at the same time, each in their own <A HREF="intro.html#tab">tab</A> page.

What happens is that Nvim opens a <A HREF="windows.html#window">window</A> for each of the files.  This is like
using the |<A HREF="starting.html#-O">-O</A>| argument.  This uses vertical splits, but if you prefer
horizontal splits use the |<A HREF="starting.html#-o">-o</A>| argument instead:

<B>	nvim -d -o file1 file2 [file3 [file4]]</B>

If you always prefer horizontal splits include &quot;horizontal&quot; in <A HREF="options.html#'diffopt'">'diffopt'</A>.

In each of the edited files these <A HREF="options.html#options">options</A> are set:

	<A HREF="options.html#'diff'">'diff'</A>		on
	<A HREF="options.html#'scrollbind'">'scrollbind'</A>	on
	<A HREF="options.html#'cursorbind'">'cursorbind'</A>	on
	<A HREF="options.html#'scrollopt'">'scrollopt'</A>	includes &quot;hor&quot;
	<A HREF="options.html#'wrap'">'wrap'</A>		off, or leave as-is if <A HREF="options.html#'diffopt'">'diffopt'</A> includes &quot;followwrap&quot;
	<A HREF="options.html#'foldmethod'">'foldmethod'</A>	&quot;<A HREF="#diff">diff</A>&quot;
	<A HREF="options.html#'foldcolumn'">'foldcolumn'</A>	value from <A HREF="options.html#'diffopt'">'diffopt'</A>, default is 2

These <A HREF="options.html#options">options</A> are set local to the <A HREF="windows.html#window">window</A>.  When editing another file they are
reset to the global value.
The <A HREF="options.html#options">options</A> can still be overruled from a <A HREF="options.html#modeline">modeline</A> when re-editing the file.
However, <A HREF="options.html#'foldmethod'">'foldmethod'</A> and <A HREF="options.html#'wrap'">'wrap'</A> won't be set from a <A HREF="options.html#modeline">modeline</A> when <A HREF="options.html#'diff'">'diff'</A> is
set.
See `:diffoff` for an easy way to revert the <A HREF="options.html#options">options</A>.

The differences shown are actually the differences in the buffer.  Thus if you
make changes after loading a file, these will be included in the displayed
diffs.  You might have to <A HREF="#do">do</A> &quot;<A HREF="#:diffupdate">:diffupdate</A>&quot; now and then, not all changes are
immediately taken into account, especially when using an external <A HREF="#diff">diff</A> command.

In your <A HREF="starting.html#vimrc">vimrc</A> file you could <A HREF="#do">do</A> something special when Vim was started in
<A HREF="#diff">diff</A> mode.  You could use a construct like this:

<B>	if &amp;diff</B>
<B>	   setup for diff mode</B>
<B>	else</B>
<B>	   setup for non-diff mode</B>
<B>	endif</B>

While already in Vim you can start <A HREF="#diff">diff</A> mode in three ways.


							*<A NAME="E98"></A><B>E98</B>*

:diffs[plit] {filename}					*<A NAME=":diffs"></A><B>:diffs</B>* *<A NAME=":diffsplit"></A><B>:diffsplit</B>*
		Open a new <A HREF="windows.html#window">window</A> on the file {filename}.  The <A HREF="options.html#options">options</A> are set
		<A HREF="motion.html#as">as</A> for &quot;<A HREF="nvim.html#nvim">nvim</A> -d&quot; for the current and the newly opened <A HREF="windows.html#window">window</A>.
		Also see <A HREF="options.html#'diffexpr'">'diffexpr'</A>.


							*<A NAME=":difft"></A><B>:difft</B>* *<A NAME=":diffthis"></A><B>:diffthis</B>*
:difft[his]	Make the current <A HREF="windows.html#window">window</A> part of the <A HREF="#diff">diff</A> <A HREF="windows.html#windows">windows</A>.  This sets
		the <A HREF="options.html#options">options</A> <A HREF="motion.html#as">as</A> for &quot;<A HREF="nvim.html#nvim">nvim</A> -d&quot;.


:diffp[atch] {patchfile}			 *<A NAME="E816"></A><B>E816</B>* *<A NAME=":diffp"></A><B>:diffp</B>* *<A NAME=":diffpatch"></A><B>:diffpatch</B>*
		Use the current buffer, patch <A HREF="motion.html#it">it</A> with the <A HREF="#diff">diff</A> found in
		{patchfile} and open a buffer on the result.  This sets the
		<A HREF="options.html#options">options</A> <A HREF="motion.html#as">as</A> for &quot;<A HREF="nvim.html#nvim">nvim</A> -d&quot;.
		{patchfile} can be in any format that the &quot;patch&quot; program
		understands or <A HREF="options.html#'patchexpr'">'patchexpr'</A> can handle.
		Note that {patchfile} should only contain a <A HREF="#diff">diff</A> for one file,
		the current file.  If {patchfile} contains diffs for other
		files <A HREF="motion.html#as">as</A> well, the results are unpredictable.  Vim changes
		directory to /tmp to avoid files in the current directory
		accidentally being patched.  But <A HREF="motion.html#it">it</A> may still result in
		various &quot;.rej&quot; files to be created.  And when absolute path
		names are present these files may get patched anyway.

To make these commands use a vertical split, prepend |<A HREF="windows.html#:vertical">:vertical</A>|.  Examples:

<B>	:vert diffsplit main.c~</B>
<B>	:vert diffpatch /tmp/diff</B>

If you always prefer a vertical split include &quot;vertical&quot; in <A HREF="options.html#'diffopt'">'diffopt'</A>.


							*<A NAME="E96"></A><B>E96</B>*
There can be up to eight <A HREF="windows.html#buffers">buffers</A> with <A HREF="options.html#'diff'">'diff'</A> set.

Since the option values are remembered with the buffer, you can edit another
file for a moment and come back to the same file and be in <A HREF="#diff">diff</A> mode again.


							*<A NAME=":diffo"></A><B>:diffo</B>* *<A NAME=":diffoff"></A><B>:diffoff</B>*
:diffo[ff]	Switch off <A HREF="#diff">diff</A> mode for the current <A HREF="windows.html#window">window</A>.  Resets related
		<A HREF="options.html#options">options</A> also when <A HREF="options.html#'diff'">'diff'</A> was not set.

:diffo[ff]!	Switch off <A HREF="#diff">diff</A> mode for the current <A HREF="windows.html#window">window</A> and in all <A HREF="windows.html#windows">windows</A>
		in the current <A HREF="intro.html#tab">tab</A> page where <A HREF="options.html#'diff'">'diff'</A> is set.  Resetting
		related <A HREF="options.html#options">options</A> only happens in a <A HREF="windows.html#window">window</A> that has <A HREF="options.html#'diff'">'diff'</A> set,
		if the current <A HREF="windows.html#window">window</A> does not have <A HREF="options.html#'diff'">'diff'</A> set then no <A HREF="options.html#options">options</A>
		in <A HREF="motion.html#it">it</A> are changed.
		Hidden <A HREF="windows.html#buffers">buffers</A> are also removed from the <A HREF="eval.html#list">list</A> of diff'ed
		<A HREF="windows.html#buffers">buffers</A>.

The `:diffoff` command resets the relevant <A HREF="options.html#options">options</A> to the values they had when
using `:diffsplit`, `:diffpatch` , `:diffthis`. or starting Vim in <A HREF="#diff">diff</A> mode.
When using `:diffoff` <A HREF="if_cscop.html#twice">twice</A> the last saved values are restored.
Otherwise they are set to their default value:

	<A HREF="options.html#'diff'">'diff'</A>		off
	<A HREF="options.html#'scrollbind'">'scrollbind'</A>	off
	<A HREF="options.html#'cursorbind'">'cursorbind'</A>	off
	<A HREF="options.html#'scrollopt'">'scrollopt'</A>	without &quot;hor&quot;
	<A HREF="options.html#'wrap'">'wrap'</A>		on, or leave as-is if <A HREF="options.html#'diffopt'">'diffopt'</A> includes &quot;followwrap&quot;
	<A HREF="options.html#'foldmethod'">'foldmethod'</A>	&quot;manual&quot;
	<A HREF="options.html#'foldcolumn'">'foldcolumn'</A>	0

==============================================================================

2. Viewing diffs						*<A NAME="view-diffs"></A><B>view-diffs</B>*

The effect is that the <A HREF="#diff">diff</A> <A HREF="windows.html#windows">windows</A> show the same text, with the differences
highlighted.  When <A HREF="scroll.html#scrolling">scrolling</A> the text, the <A HREF="options.html#'scrollbind'">'scrollbind'</A> option will make the
text in other <A HREF="windows.html#windows">windows</A> to be scrolled <A HREF="motion.html#as">as</A> well.  With vertical splits the text
should be aligned properly.

The alignment of text will go wrong when:
- <A HREF="options.html#'wrap'">'wrap'</A> is on, some lines will be wrapped and occupy two or more screen
  lines
- <A HREF="fold.html#folds">folds</A> are open in one <A HREF="windows.html#window">window</A> but not another
- <A HREF="options.html#'scrollbind'">'scrollbind'</A> is off
- changes have been made to the text
- &quot;filler&quot; is not present in <A HREF="options.html#'diffopt'">'diffopt'</A>, deleted/inserted lines makes the
  alignment go wrong

All the <A HREF="windows.html#buffers">buffers</A> edited in a <A HREF="windows.html#window">window</A> where the <A HREF="options.html#'diff'">'diff'</A> option is set will join in
the <A HREF="#diff">diff</A>.  This is also possible for hidden <A HREF="windows.html#buffers">buffers</A>.  They must have been
edited in a <A HREF="windows.html#window">window</A> first for this to be possible.  To get rid of the hidden
<A HREF="windows.html#buffers">buffers</A> use `:diffoff!`.


					*<A NAME=":DiffOrig"></A><B>:DiffOrig</B>* *<A NAME="diff-original-file"></A><B>diff-original-file</B>*
Since <A HREF="options.html#'diff'">'diff'</A> is a window-local option, it's possible to view the same buffer
in <A HREF="#diff">diff</A> mode in one <A HREF="windows.html#window">window</A> and &quot;normal&quot; in another <A HREF="windows.html#window">window</A>.  It is also
possible to view the changes you have made to a buffer since the file was
loaded.  Since Vim doesn't allow having two <A HREF="windows.html#buffers">buffers</A> for the same file, you
need another buffer.  This command is useful:
<B>	 command DiffOrig vert new | set buftype=nofile | read ++edit # | 0d_</B>
<B>		\ | diffthis | wincmd p | diffthis</B>
Use &quot;<A HREF="#:DiffOrig">:DiffOrig</A>&quot; to see the differences
between the current buffer and the file <A HREF="motion.html#it">it</A> was loaded from.

A buffer that is unloaded cannot be used for the <A HREF="#diff">diff</A>.  But <A HREF="motion.html#it">it</A> does work for
hidden <A HREF="windows.html#buffers">buffers</A>.  You can use &quot;<A HREF="windows.html#:hide">:hide</A>&quot; to close a <A HREF="windows.html#window">window</A> without unloading the
buffer.  If you don't want a buffer to remain used for the <A HREF="#diff">diff</A> <A HREF="#do">do</A> &quot;<A HREF="options.html#:set">:set</A>
nodiff&quot; before hiding <A HREF="motion.html#it">it</A>.


						*<A NAME=":dif"></A><B>:dif</B>* *<A NAME=":diff"></A><B>:diff</B>* *<A NAME=":diffupdate"></A><B>:diffupdate</B>*
:dif[fupdate][!]		Update the <A HREF="#diff">diff</A> highlighting and <A HREF="fold.html#folds">folds</A>.

Vim attempts to keep the differences updated when you make changes to the
text.  This mostly takes care of inserted and deleted lines.  Changes within a
line and more complicated changes <A HREF="#do">do</A> not cause the differences to be updated.
To force the differences to be updated use:

<B>	:diffupdate</B>

If the ! is included Vim will check if the file was changed externally and
needs to be reloaded.  It will prompt for each changed file, like `:checktime`
was used.

Vim will show filler lines for lines that are missing in one <A HREF="windows.html#window">window</A> but are
present in another.  These lines were inserted in another file or deleted in
this file.  Removing &quot;filler&quot; from the <A HREF="options.html#'diffopt'">'diffopt'</A> option will make Vim not
display these filler lines.


Folds are used to hide the text that wasn't changed.  See |<A HREF="fold.html#folding">folding</A>| for all
the commands that can be used with <A HREF="fold.html#folds">folds</A>.

The <A HREF="repeat.html#context">context</A> of lines above a difference that are not included in the fold can
be set with the <A HREF="options.html#'diffopt'">'diffopt'</A> option.  For example, to set the <A HREF="repeat.html#context">context</A> to three
lines:

<B>	:set diffopt=filler,context:3</B>


The diffs are highlighted with these groups:

|<A HREF="syntax.html#hl-DiffAdd">hl-DiffAdd</A>|	DiffAdd		Added (inserted) lines.  These lines exist in
				this buffer but not in another.
|<A HREF="syntax.html#hl-DiffChange">hl-DiffChange</A>|	DiffChange	Changed lines.
|<A HREF="syntax.html#hl-DiffText">hl-DiffText</A>|	DiffText	Changed text inside a Changed line.  Vim
				finds the first character that is different,
				and the last character that is different
				(searching from the end of the line).  The
				text in between is highlighted.  This means
				that parts in the middle that are still the
				same are highlighted anyway.  The <A HREF="options.html#'diffopt'">'diffopt'</A>
				flags &quot;iwhite&quot; and &quot;icase&quot; are used here.
|<A HREF="syntax.html#hl-DiffDelete">hl-DiffDelete</A>|	DiffDelete	Deleted lines.  Also called filler lines,
				because they don't really exist in this
				buffer.

==============================================================================

3. Jumping to diffs					*<A NAME="jumpto-diffs"></A><B>jumpto-diffs</B>*

Two commands can be used to jump to diffs:

								*<A NAME="[c"></A><B>[c</B>*
	<A HREF="#[c">[c</A>		Jump backwards to the previous start of a change.
			When a <A HREF="intro.html#count">count</A> is used, <A HREF="#do">do</A> <A HREF="motion.html#it">it</A> that many times.

								*<A NAME="]c"></A><B>]c</B>*
	<A HREF="#]c">]c</A>		Jump forwards to the next start of a change.
			When a <A HREF="intro.html#count">count</A> is used, <A HREF="#do">do</A> <A HREF="motion.html#it">it</A> that many times.

It is an error if there is no change for the cursor to move to.

==============================================================================

4. Diff <A HREF="uganda.html#copying">copying</A>			*<A NAME="copy-diffs"></A><B>copy-diffs</B>* *<A NAME="E99"></A><B>E99</B>* *<A NAME="E100"></A><B>E100</B>* *<A NAME="E101"></A><B>E101</B>* *<A NAME="E102"></A><B>E102</B>* *<A NAME="E103"></A><B>E103</B>*

								*<A NAME="merge"></A><B>merge</B>*
There are two commands to copy text from one buffer to another.  The result is
that the <A HREF="windows.html#buffers">buffers</A> will be equal within the specified range.


							*<A NAME=":diffg"></A><B>:diffg</B>* *<A NAME=":diffget"></A><B>:diffget</B>*
:[range]diffg[et] [bufspec]
		Modify the current buffer to <A HREF="undo.html#undo">undo</A> difference with another
		buffer.  If [bufspec] is given, that buffer is used.  If
		[bufspec] refers to the current buffer then nothing happens.
		Otherwise this only works if there is one other buffer in <A HREF="#diff">diff</A>
		mode.
		See below for <A HREF="cmdline.html#[range]">[range]</A>.


						*<A NAME=":diffpu"></A><B>:diffpu</B>* *<A NAME=":diffput"></A><B>:diffput</B>* *<A NAME="E793"></A><B>E793</B>*
:[range]diffpu[t] [bufspec]
		Modify another buffer to <A HREF="undo.html#undo">undo</A> difference with the current
		buffer.  Just like &quot;<A HREF="#:diffget">:diffget</A>&quot; but the other buffer is modified
		instead of the current one.
		When [bufspec] is omitted and there is more than one other
		buffer in <A HREF="#diff">diff</A> mode where <A HREF="options.html#'modifiable'">'modifiable'</A> is set this fails.
		See below for <A HREF="cmdline.html#[range]">[range]</A>.


							*<A NAME="do"></A><B>do</B>*
[count]do	Same <A HREF="motion.html#as">as</A> &quot;<A HREF="#:diffget">:diffget</A>&quot; without range.  The &quot;<A HREF="insert.html#o">o</A>&quot; stands for &quot;obtain&quot;
		(&quot;dg&quot; can't be used, <A HREF="motion.html#it">it</A> could be the start of &quot;dgg&quot;!). Note:
		this doesn't work in <A HREF="visual.html#Visual">Visual</A> mode.
		If you give a <A HREF="intro.html#[count]">[count]</A>, <A HREF="motion.html#it">it</A> is used <A HREF="motion.html#as">as</A> the [bufspec] argument
		for &quot;<A HREF="#:diffget">:diffget</A>&quot;.


							*<A NAME="dp"></A><B>dp</B>*
[count]dp	Same <A HREF="motion.html#as">as</A> &quot;<A HREF="#:diffput">:diffput</A>&quot; without range.  Note: this doesn't work in
		<A HREF="visual.html#Visual">Visual</A> mode.
		If you give a <A HREF="intro.html#[count]">[count]</A>, <A HREF="motion.html#it">it</A> is used <A HREF="motion.html#as">as</A> the [bufspec] argument
		for &quot;<A HREF="#:diffput">:diffput</A>&quot;.


When no <A HREF="cmdline.html#[range]">[range]</A> is given, the <A HREF="#diff">diff</A> at the cursor position or just above <A HREF="motion.html#it">it</A> is
affected.  When <A HREF="cmdline.html#[range]">[range]</A> is used, Vim tries to only put or get the specified
lines.  When there are deleted lines, this may not always be possible.

There can be deleted lines below the last line of the buffer.  When the cursor
is on the last line in the buffer and there is no <A HREF="#diff">diff</A> above this line, the
&quot;<A HREF="#:diffget">:diffget</A>&quot; and &quot;<A HREF="#do">do</A>&quot; commands will obtain lines from the other buffer.

To be able to get those lines from another buffer in a <A HREF="cmdline.html#[range]">[range]</A> it's allowed to
use the last line number plus one.  This command gets all diffs from the other
buffer:

<B>	:1,$+1diffget</B>

Note that deleted lines are displayed, but not counted <A HREF="motion.html#as">as</A> text lines.  You
can't move the cursor into them.  To fill the deleted lines with the lines
from another buffer use &quot;<A HREF="#:diffget">:diffget</A>&quot; on the line below them.

								*<A NAME="E787"></A><B>E787</B>*
When the buffer that is about to be modified is read-only and the <A HREF="autocmd.html#autocommand">autocommand</A>
that is triggered by |<A HREF="autocmd.html#FileChangedRO">FileChangedRO</A>| changes <A HREF="windows.html#buffers">buffers</A> the command will fail.
The <A HREF="autocmd.html#autocommand">autocommand</A> must not change <A HREF="windows.html#buffers">buffers</A>.

The [bufspec] argument above can be a buffer number, a <A HREF="pattern.html#pattern">pattern</A> for a buffer
name or a part of a buffer name.  Examples:

	<A HREF="#:diffget">:diffget</A>		Use the other buffer which is in <A HREF="#diff">diff</A> mode
	<A HREF="#:diffget">:diffget</A> 3		Use buffer 3
	<A HREF="#:diffget">:diffget</A> v2		Use the buffer which matches &quot;v2&quot; and is in
				<A HREF="#diff">diff</A> mode (e.g., &quot;file.c.v2&quot;)

==============================================================================

5. Diff <A HREF="options.html#options">options</A>						*<A NAME="diff-options"></A><B>diff-options</B>*

Also see |<A HREF="options.html#'diffopt'">'diffopt'</A>| and the &quot;diff&quot; item of |<A HREF="options.html#'fillchars'">'fillchars'</A>|.


					    *<A NAME="diff-slow"></A><B>diff-slow</B>* *<A NAME="diff_translations"></A><B>diff_translations</B>*
For very long lines, the <A HREF="#diff">diff</A> <A HREF="syntax.html#syntax">syntax</A> highlighting might be slow, especially
since <A HREF="motion.html#it">it</A> tries to match all different kind of localisations. To disable
localisations and speed up the <A HREF="syntax.html#syntax">syntax</A> highlighting, set the global variable
g:diff_translations to zero:

<B>    let g:diff_translations = 0</B>
 
After setting this variable, <A HREF="editing.html#reload">reload</A> the <A HREF="syntax.html#syntax">syntax</A> <A HREF="usr_41.html#script">script</A>:

<B>    set syntax=diff</B>
 



FINDING THE DIFFERENCES					*<A NAME="diff-diffexpr"></A><B>diff-diffexpr</B>*

The <A HREF="options.html#'diffexpr'">'diffexpr'</A> option can be set to use something else than the standard

&quot;<A HREF="#diff">diff</A>&quot; program to compare two files and find the differences. *<A NAME="E959"></A><B>E959</B>*

When <A HREF="options.html#'diffexpr'">'diffexpr'</A> is empty, Vim uses this command to find the differences
between file1 and file2:

<B>	diff file1 file2 &gt; outfile</B>

The &quot;<A HREF="change.html#&gt;">&gt;</A>&quot; is replaced with the value of <A HREF="options.html#'shellredir'">'shellredir'</A>.

The output of &quot;<A HREF="#diff">diff</A>&quot; must be a normal &quot;ed&quot; style <A HREF="#diff">diff</A> or a unified <A HREF="#diff">diff</A>.  Do
NOT use a <A HREF="repeat.html#context">context</A> <A HREF="#diff">diff</A>.  This example explains the format that Vim expects for
the &quot;ed&quot; style <A HREF="#diff">diff</A>:

<B>	1a2</B>
<B>	&gt; bbb</B>
<B>	4d4</B>
<B>	&lt; 111</B>
<B>	7c7</B>
<B>	&lt; GGG</B>
<B>	---</B>
<B>	&gt; ggg</B>

The &quot;1a2&quot; item appends the line &quot;bbb&quot;.
The &quot;4d4&quot; item deletes the line &quot;111&quot;.
The &quot;7c7&quot; item replaces the line &quot;GGG&quot; with &quot;ggg&quot;.

When <A HREF="options.html#'diffexpr'">'diffexpr'</A> is not empty, Vim evaluates <A HREF="motion.html#it">it</A> to obtain a <A HREF="#diff">diff</A> file in the
format mentioned.  These <A HREF="eval.html#variables">variables</A> are set to the file names used:

	<A HREF="eval.html#v:fname_in">v:fname_in</A>		original file
	<A HREF="eval.html#v:fname_new">v:fname_new</A>		new version of the same file
	<A HREF="eval.html#v:fname_out">v:fname_out</A>		resulting <A HREF="#diff">diff</A> file

Additionally, <A HREF="options.html#'diffexpr'">'diffexpr'</A> should take care of &quot;icase&quot; and &quot;iwhite&quot; in the
<A HREF="options.html#'diffopt'">'diffopt'</A> option.  <A HREF="options.html#'diffexpr'">'diffexpr'</A> cannot change the value of <A HREF="options.html#'lines'">'lines'</A> and
<A HREF="options.html#'columns'">'columns'</A>.

Example (this does almost the same <A HREF="motion.html#as">as</A> <A HREF="options.html#'diffexpr'">'diffexpr'</A> being empty):

<B>	set diffexpr=MyDiff()</B>
<B>	function MyDiff()</B>
<B>	   let opt = ""</B>
<B>	   if &amp;diffopt =~ "icase"</B>
<B>	     let opt = opt . "-i "</B>
<B>	   endif</B>
<B>	   if &amp;diffopt =~ "iwhite"</B>
<B>	     let opt = opt . "-b "</B>
<B>	   endif</B>
<B>	   silent execute "!diff -a --binary " . opt . v:fname_in . " " . v:fname_new .</B>
<B>		\  " &gt; " . v:fname_out</B>
<B>	   redraw!</B>
<B>	endfunction</B>

The &quot;-a&quot; argument is used to force comparing the files <A HREF="motion.html#as">as</A> text, comparing <A HREF="motion.html#as">as</A>
binaries isn't useful.  The &quot;--binary&quot; argument makes the files read in binary
mode, so that a <A HREF="starting.html#CTRL-Z">CTRL-Z</A> doesn't end the text on DOS.

The `redraw!` command may not be needed, depending on whether executing a
shell command shows something on the display or not.


						*<A NAME="E810"></A><B>E810</B>* *<A NAME="E97"></A><B>E97</B>*
Vim will <A HREF="#do">do</A> a test if the <A HREF="#diff">diff</A> output looks alright.  If <A HREF="motion.html#it">it</A> doesn't, you will
get an error message.  Possible causes:
-  The &quot;<A HREF="#diff">diff</A>&quot; program cannot be executed.
-  The &quot;<A HREF="#diff">diff</A>&quot; program doesn't produce normal &quot;ed&quot; style diffs (see above).
-  The <A HREF="options.html#'shell'">'shell'</A> and associated <A HREF="options.html#options">options</A> are not set correctly.  Try if filtering
   works with a command like &quot;:!sort&quot;.
-  You are using <A HREF="options.html#'diffexpr'">'diffexpr'</A> and <A HREF="motion.html#it">it</A> doesn't work.
If it's not clear what the problem is set the <A HREF="options.html#'verbose'">'verbose'</A> option to one or more
to see more <A HREF="message.html#messages">messages</A>.

The self-installing Vim for MS-Windows includes a <A HREF="#diff">diff</A> program.  If you don't
have <A HREF="motion.html#it">it</A> you might want to <A HREF="intro.html#download">download</A> a diff.exe.  For example from
	<A HREF="http://gnuwin32.sourceforge.net/packages/diffutils.htm">http://gnuwin32.sourceforge.net/packages/diffutils.htm</A>.



USING PATCHES					*<A NAME="diff-patchexpr"></A><B>diff-patchexpr</B>*

The <A HREF="options.html#'patchexpr'">'patchexpr'</A> option can be set to use something else than the standard
&quot;patch&quot; program.

When <A HREF="options.html#'patchexpr'">'patchexpr'</A> is empty, Vim will call the &quot;patch&quot; program like this:

<B>	patch -o outfile origfile &lt; patchfile</B>

This should work fine with most versions of the &quot;patch&quot; program.  Note that a
CR in the middle of a line may cause problems, <A HREF="motion.html#it">it</A> is seen <A HREF="motion.html#as">as</A> a line break.

If the default doesn't work for you, set the <A HREF="options.html#'patchexpr'">'patchexpr'</A> to an <A HREF="eval.html#expression">expression</A> that
will have the same effect.  These <A HREF="eval.html#variables">variables</A> are set to the file names used:

	<A HREF="eval.html#v:fname_in">v:fname_in</A>		original file
	<A HREF="eval.html#v:fname_diff">v:fname_diff</A>		patch file
	<A HREF="eval.html#v:fname_out">v:fname_out</A>		resulting patched file

Example (this does the same <A HREF="motion.html#as">as</A> <A HREF="options.html#'patchexpr'">'patchexpr'</A> being empty):

<B>	set patchexpr=MyPatch()</B>
<B>	function MyPatch()</B>
<B>	   :call system("patch -o " . v:fname_out . " " . v:fname_in .</B>
<B>	   \  " &lt; " . v:fname_diff)</B>
<B>	endfunction</B>

Make sure that using the &quot;patch&quot; program doesn't have unwanted side effects.
For example, watch out for additionally generated files, which should be
deleted.  It should just patch the file and nothing else.
   Vim will change directory to &quot;/tmp&quot; or another temp directory before
evaluating <A HREF="options.html#'patchexpr'">'patchexpr'</A>.  This hopefully avoids that files in the current
directory are accidentally patched.  Vim will also delete files starting with
<A HREF="eval.html#v:fname_in">v:fname_in</A> and ending in &quot;.rej&quot; and &quot;.orig&quot;.

<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
    </div>

    <footer>
      <div class="container">
        Generated Sun Jul 11 05:28:47 UTC 2021 from <a href="https://github.com/neovim/neovim/commit/79fe9dedcfede1d2038b47a21f21a995051deaa2"><code>79fe9de</code></a>.
      </div>
    </footer>
  </body>
</html>
